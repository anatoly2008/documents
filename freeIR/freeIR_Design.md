---
title: "万能遥控器设计"
author: "hnhkj@163.com"
date: "2016年4月12日"
output: html_document
---

## 万能红外遥控器项目设计

最近在做一个万能红外遥控器的项目，该项目的主要思路是通过一个小型的前端控制器，对红外信号进行读取和发送。该前端控制器可以发送/接收来智能终端的控制。实现智能终端对家中各种红外设备的控制。例如：空调，电视，机顶盒等各种红外设备。该项目的第一步是对遥控器信号进行采样/解码分析，分析出各种遥控器的编码规则。在了解了各种遥控器的编码规则后，就可以实现对各种遥控器的控制实现了。

#### 前端控制器设计

该控制器是万能遥控器的核心部件，该控制由价格低廉的STM8S处理器来实现，该处理具备多种接口，可以方便地和各种接口设备进行通讯，并且价格低廉。

|序号|引脚名称|功能|
|----|-------|---|
|1|PA1|IR接收|
|2|PA3|IR发射|
|3|PD5|UART RX|
|4|PD6|UART TX|

** 通讯协议（制定中……）**

#### 终端控制器设计

终端控制器可以是任何的智能设备，包括PC机，Android手机，IPhone手机等。我们通过不同的通讯转换器配合各种智能设备。通讯适配器可以将Uart信号通过Ethernet，Wifi，Zigbee，Bluetooth等网络发送到各种终端控制器。从而让终端控制器实现了万能遥控器的功能。实现对各种红外设备的近距离/远程控制。

## Windows系统万能遥控器控制

对于红外遥控器设计初期，采用PC机来进行遥控器前端设计调试是一个很好的选择。Windows是目前最流行的PC系统（Linux系统我们在将来在进行移植）。我们通过一个RS232转换芯片将STM8S数据直接发送到PC机。然后，通过Windows应用程序对设计前端进行解码和编码。
确定下来整体的设计思路后，我们就可以按部就班地进行系统性的设计。从而让这样设计能够延续下去，能够为我们的生活提供便利。
Windows程序的主要功能是对COMx的读写和数据分析，为了让这个程序能够方便地在目前流行的Windows版本之间运行。我采用了对Win32 API直接进行操作的方式实现对COMx口的读写，而不采用以前流行的MSComm控件。从而让应用程序脱离MSComm的控制。
对于Win32 API的COMx控制程序代码，我参考了http://blog.csdn.net/mingojiang/article/details/7713529的部分内容和代码。这是一个不错的参考文档。

未完，待续……
